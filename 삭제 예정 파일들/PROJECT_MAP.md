# ğŸ—ºï¸ UniRoad í”„ë¡œì íŠ¸ ë§µ

> **í”„ë¡œì íŠ¸ ê°œìš”**: ëŒ€í•™ì…ì‹œ ì»¨ì„¤íŒ…ì„ ìœ„í•œ ë©€í‹°ì—ì´ì „íŠ¸ RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œ
> 
> **ê¸°ìˆ  ìŠ¤íƒ**: FastAPI (ë°±ì—”ë“œ) + React/TypeScript/Vite (í”„ë¡ íŠ¸ì—”ë“œ) + Supabase (ë°ì´í„°ë² ì´ìŠ¤) + Google Gemini (AI)

---

## ğŸ“Š ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React + TypeScript + Vite)                     â”‚
â”‚                              Port: 5173                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ChatPage   â”‚  â”‚  AdminPage   â”‚  â”‚AgentAdminPageâ”‚  â”‚    AuthPage      â”‚ â”‚
â”‚  â”‚   (ì±„íŒ… UI)   â”‚  â”‚ (ë¬¸ì„œ ê´€ë¦¬)   â”‚  â”‚(ì—ì´ì „íŠ¸ ê´€ë¦¬)â”‚  â”‚   (ë¡œê·¸ì¸)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ /api í”„ë¡ì‹œ
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend (FastAPI + Python)                            â”‚
â”‚                              Port: 8000                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                            Routers (API ì—”ë“œí¬ì¸íŠ¸)                    â”‚   â”‚
â”‚  â”‚  auth â”‚ sessions â”‚ chat â”‚ upload â”‚ documents â”‚ agent_admin â”‚ announcementsâ”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Multi-Agent System                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚ Orchestrationâ”‚ => â”‚  Sub Agents  â”‚ => â”‚ Final Agent  â”‚          â”‚   â”‚
â”‚  â”‚  â”‚    Agent     â”‚    â”‚ (ëŒ€í•™ë³„ ì—ì´ì „íŠ¸)â”‚    â”‚ (ë‹µë³€ ì¢…í•©)   â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Services (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)                       â”‚   â”‚
â”‚  â”‚  gemini_service â”‚ embedding_service â”‚ score_calculators â”‚ supabase  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    External Services (ì™¸ë¶€ ì„œë¹„ìŠ¤)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Supabase      â”‚  â”‚   Google Gemini    â”‚  â”‚   Supabase Auth    â”‚    â”‚
â”‚  â”‚ (PostgreSQL+Vector)â”‚  â”‚    (AI ëª¨ë¸)        â”‚  â”‚    (ì¸ì¦)          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ì „ì²´ íŒŒì¼ êµ¬ì¡°

```
uniroad/
â”œâ”€â”€ ğŸ”§ ì„¤ì • ë° ìŠ¤í¬ë¦½íŠ¸ (ìƒìœ„ ë ˆë²¨)
â”‚   â”œâ”€â”€ setup.sh                    # í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
â”‚   â”œâ”€â”€ start.sh                    # ì„œë²„ ì‹œì‘ (macOS)
â”‚   â”œâ”€â”€ stop.sh                     # ì„œë²„ ì¤‘ì§€
â”‚   â”œâ”€â”€ deploy-aws.sh               # AWS EC2 ë°°í¬
â”‚   â”œâ”€â”€ .gitignore                  # Git ë¬´ì‹œ íŒŒì¼
â”‚   â””â”€â”€ README.md                   # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
â”‚
â”œâ”€â”€ ğŸ“˜ ë¬¸ì„œ
â”‚   â”œâ”€â”€ PROJECT-DOCUMENTATION.md    # ê¸°ìˆ  ë¬¸ì„œ
â”‚   â”œâ”€â”€ SYSTEM_ARCHITECTURE.md      # ì•„í‚¤í…ì²˜ ë¬¸ì„œ
â”‚   â””â”€â”€ docs/                       # ìƒì„¸ ë¬¸ì„œ í´ë”
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ backend/                     # ë°±ì—”ë“œ (FastAPI)
â”‚   â”œâ”€â”€ main.py                     # â­ ì§„ì…ì 
â”‚   â”œâ”€â”€ requirements.txt            # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ config/                     # ì„¤ì •
â”‚   â”œâ”€â”€ middleware/                 # ë¯¸ë“¤ì›¨ì–´
â”‚   â”œâ”€â”€ routers/                    # API ë¼ìš°í„°
â”‚   â”œâ”€â”€ services/                   # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ models/                     # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ migrations/                 # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ data/                       # í”„ë¡¬í”„íŠ¸ ë°ì´í„°
â”‚
â””â”€â”€ ğŸ¨ frontend/                    # í”„ë¡ íŠ¸ì—”ë“œ (React)
    â”œâ”€â”€ index.html                  # HTML ì§„ì…ì 
    â”œâ”€â”€ package.json                # Node.js ì˜ì¡´ì„±
    â”œâ”€â”€ vite.config.ts              # Vite ì„¤ì •
    â””â”€â”€ src/                        # ì†ŒìŠ¤ ì½”ë“œ
        â”œâ”€â”€ main.tsx                # â­ React ì§„ì…ì 
        â”œâ”€â”€ App.tsx                 # ë¼ìš°íŒ… ì„¤ì •
        â”œâ”€â”€ api/                    # API í´ë¼ì´ì–¸íŠ¸
        â”œâ”€â”€ contexts/               # React Context
        â”œâ”€â”€ hooks/                  # ì»¤ìŠ¤í…€ í›…
        â”œâ”€â”€ components/             # UI ì»´í¬ë„ŒíŠ¸
        â””â”€â”€ pages/                  # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
```

---

# ğŸ“‚ ìƒìœ„ ë ˆë²¨ íŒŒì¼ (ë£¨íŠ¸ ë””ë ‰í† ë¦¬)

## ğŸ”§ ì‹¤í–‰ ë° ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

| íŒŒì¼ëª… | ì—­í•  | ì—°ê²° ëŒ€ìƒ |
|--------|------|----------|
| `setup.sh` | í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • (venv ìƒì„±, ì˜ì¡´ì„± ì„¤ì¹˜) | `backend/requirements.txt`, `frontend/package.json` |
| `start.sh` | ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ë™ì‹œ ì‹œì‘ (macOSìš©) | `backend/main.py`, `frontend/` |
| `stop.sh` | ëª¨ë“  ì„œë²„ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ | - |
| `deploy-aws.sh` | AWS EC2ì— ìë™ ë°°í¬ | ì „ì²´ í”„ë¡œì íŠ¸ |

## ğŸ“˜ ë¬¸ì„œ íŒŒì¼

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `README.md` | í”„ë¡œì íŠ¸ ì†Œê°œ ë° ì‹œì‘ ê°€ì´ë“œ |
| `PROJECT-DOCUMENTATION.md` | ê¸°ìˆ  ë¬¸ì„œ (RAG ì•Œê³ ë¦¬ì¦˜, API ìŠ¤í™ ë“±) |
| `SYSTEM_ARCHITECTURE.md` | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ ì„¤ëª… |
| `SETUP_COMPLETE.md` | ì„¤ì • ì™„ë£Œ í™•ì¸ ë¬¸ì„œ |
| `SERVER_INFO.txt` | ì„œë²„ ì •ë³´ ë¹ ë¥¸ ì°¸ì¡° |
| `CHAT_ALGORITHM_DETAIL.md` | ì±„íŒ… ì•Œê³ ë¦¬ì¦˜ ìƒì„¸ |
| `CITATION_DEBUG_CHECKLIST.md` | ì¸ìš© ë””ë²„ê¹… ì²´í¬ë¦¬ìŠ¤íŠ¸ |
| `TOKEN_USAGE_README.md` | í† í° ì‚¬ìš©ëŸ‰ ì¶”ì  ì„¤ëª… |
| `ì„œë²„_ê´€ë¦¬_ëª…ë ¹ì–´.md` | ì„œë²„ ê´€ë¦¬ ëª…ë ¹ì–´ ëª¨ìŒ |

## ğŸ”§ ì„¤ì • íŒŒì¼

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `.gitignore` | Gitì—ì„œ ë¬´ì‹œí•  íŒŒì¼ íŒ¨í„´ ì •ì˜ |

---

# ğŸ–¥ï¸ Backend (ì¤‘ìœ„ ë ˆë²¨)

## ğŸ“ ì§„ì…ì 

### `backend/main.py` â­
**ì—­í• **: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì 

**ì£¼ìš” ê¸°ëŠ¥**:
- FastAPI ì•± ì´ˆê¸°í™” ë° CORS ì„¤ì •
- ëª¨ë“  ë¼ìš°í„° ë“±ë¡
- í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ (`/`, `/api/health`)

**ì—°ê²°ë˜ëŠ” íŒŒì¼**:
```
main.py
â”œâ”€â”€ routers/auth.py          â†’ /api/auth
â”œâ”€â”€ routers/sessions.py      â†’ /api/sessions  
â”œâ”€â”€ routers/chat.py          â†’ /api/chat
â”œâ”€â”€ routers/upload.py        â†’ /api/upload
â”œâ”€â”€ routers/documents.py     â†’ /api/documents
â”œâ”€â”€ routers/agent_admin.py   â†’ /api/agent
â””â”€â”€ routers/announcements.py â†’ /api/announcements
```

---

## ğŸ“ config/ (ì„¤ì •)

| íŒŒì¼ëª… | ì—­í•  | ì—°ê²° ëŒ€ìƒ |
|--------|------|----------|
| `config.py` | í™˜ê²½ë³€ìˆ˜ ë¡œë“œ (Supabase, Gemini API í‚¤ ë“±) | ëª¨ë“  ì„œë¹„ìŠ¤ |
| `constants.py` | ìƒìˆ˜ ì •ì˜ (íŒŒì¼ í¬ê¸° ì œí•œ, ì²­í‚¹ ì„¤ì •, ëª¨ë¸ëª…) | ì„œë¹„ìŠ¤ë“¤ |
| `logging_config.py` | ë¡œê¹… ì„¤ì • (íŒŒì¼/ì½˜ì†” í•¸ë“¤ëŸ¬) | ì „ì²´ ë°±ì—”ë“œ |
| `__init__.py` | íŒ¨í‚¤ì§€ ì´ˆê¸°í™” | - |

---

## ğŸ“ middleware/ (ë¯¸ë“¤ì›¨ì–´)

| íŒŒì¼ëª… | ì—­í•  | ì—°ê²° ëŒ€ìƒ |
|--------|------|----------|
| `auth.py` | JWT ì¸ì¦ ë¯¸ë“¤ì›¨ì–´, `get_current_user` í•¨ìˆ˜ | ëª¨ë“  ë³´í˜¸ëœ ë¼ìš°í„° |

---

## ğŸ“ routers/ (API ë¼ìš°í„°)

### `auth.py` - ì¸ì¦ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/auth/signup` | POST | íšŒì›ê°€ì… |
| `/api/auth/signin` | POST | ë¡œê·¸ì¸ |
| `/api/auth/signout` | POST | ë¡œê·¸ì•„ì›ƒ |
| `/api/auth/me` | GET | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ |
| `/api/auth/refresh` | POST | í† í° ê°±ì‹  |

**ì—°ê²°**: `middleware/auth.py`, `services/supabase_client.py`

---

### `sessions.py` - ì„¸ì…˜ ê´€ë¦¬ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/sessions/` | GET | ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ |
| `/api/sessions/` | POST | ìƒˆ ì„¸ì…˜ ìƒì„± |
| `/api/sessions/{id}/messages` | GET | ë©”ì‹œì§€ ëª©ë¡ |
| `/api/sessions/{id}` | PATCH | ì„¸ì…˜ ì œëª© ìˆ˜ì • |
| `/api/sessions/{id}` | DELETE | ì„¸ì…˜ ì‚­ì œ |
| `/api/sessions/{id}/context` | GET/POST | ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ |

**ì—°ê²°**: `services/supabase_client.py`

---

### `chat.py` - ì±„íŒ… API â­ (í•µì‹¬)
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/chat/` | POST | ë™ê¸° ì±„íŒ… |
| `/api/chat/stream` | POST | **ìŠ¤íŠ¸ë¦¬ë° ì±„íŒ… (SSE)** |
| `/api/chat/stream/{session_id}` | GET | ì‹¤ì‹œê°„ ë¡œê·¸ |
| `/api/chat/reset` | POST | ëŒ€í™” ì´ˆê¸°í™” |
| `/api/chat/agents` | GET/POST/DELETE | ì—ì´ì „íŠ¸ ê´€ë¦¬ |

**ì—°ê²°**: 
```
chat.py
â”œâ”€â”€ services/multi_agent/orchestration_agent.py
â”œâ”€â”€ services/multi_agent/sub_agents.py
â”œâ”€â”€ services/multi_agent/final_agent.py
â””â”€â”€ services/supabase_client.py
```

---

### `upload.py` - ë¬¸ì„œ ì—…ë¡œë“œ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/upload/` | POST | PDF ì—…ë¡œë“œ ë° ì²˜ë¦¬ |

**ì²˜ë¦¬ íë¦„**:
```
PDF ì—…ë¡œë“œ â†’ gemini_pdf_service (Markdown ë³€í™˜) 
           â†’ classifier_service (ìš”ì•½/í•´ì‹œíƒœê·¸ ì¶”ì¶œ)
           â†’ embedding_service (ì²­í‚¹ + ì„ë² ë”©)
           â†’ supabase_client (ì €ì¥)
```

---

### `documents.py` - ë¬¸ì„œ ê´€ë¦¬ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/documents/` | GET | ë¬¸ì„œ ëª©ë¡ |
| `/api/documents/{id}` | PATCH | ë©”íƒ€ë°ì´í„° ìˆ˜ì • |
| `/api/documents/{id}` | DELETE | ë¬¸ì„œ ì‚­ì œ |

---

### `agent_admin.py` - ì—ì´ì „íŠ¸ ê´€ë¦¬ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/agent/agents` | GET | ì—ì´ì „íŠ¸ ëª©ë¡ |
| `/api/agent/models` | GET | ì‚¬ìš© ê°€ëŠ¥í•œ LLM ëª¨ë¸ |
| `/api/agent/agents/{name}/model` | PUT | ì—ì´ì „íŠ¸ ëª¨ë¸ ë³€ê²½ |
| `/api/agent/prompts/{id}/{key}` | GET/POST/PUT/DELETE | í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ |
| `/api/agent/pipeline/execute` | POST | íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ |

---

### `announcements.py` - ê³µì§€ì‚¬í•­ API
| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì—­í•  |
|-----------|--------|------|
| `/api/announcements/` | GET | ê³µì§€ ëª©ë¡ |
| `/api/announcements/{id}` | GET | ê³µì§€ ìƒì„¸ |
| `/api/announcements/` | POST | ê³µì§€ ì‘ì„± (ê´€ë¦¬ì) |
| `/api/announcements/{id}` | PUT/DELETE | ê³µì§€ ìˆ˜ì •/ì‚­ì œ (ê´€ë¦¬ì) |

---

## ğŸ“ services/ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§) - í•˜ìœ„ ë ˆë²¨

### ğŸ¤– Multi-Agent System (`services/multi_agent/`)

ì´ê²ƒì´ **í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ë¡œì§**ì…ë‹ˆë‹¤.

```
ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Orchestration Agent             â”‚
â”‚      (orchestration_agent.py)        â”‚
â”‚                                      â”‚
â”‚  â€¢ ì§ˆë¬¸ ë¶„ì„                          â”‚
â”‚  â€¢ í•„ìš”í•œ Sub Agent ì„ íƒ              â”‚
â”‚  â€¢ ì‹¤í–‰ ê³„íš ìˆ˜ë¦½                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Sub Agents                  â”‚
â”‚          (sub_agents.py)             â”‚
â”‚                                      â”‚
â”‚  â€¢ ì„œìš¸ëŒ€ Agent                       â”‚
â”‚  â€¢ ì—°ì„¸ëŒ€ Agent                       â”‚
â”‚  â€¢ ê³ ë ¤ëŒ€ Agent                       â”‚
â”‚  â€¢ ì„±ê· ê´€ëŒ€ Agent                     â”‚
â”‚  â€¢ ê²½í¬ëŒ€ Agent                       â”‚
â”‚  â€¢ Consulting Agent (í•©ê²© ë°ì´í„°)     â”‚
â”‚  â€¢ Teacher Agent (í•™ìŠµ ì¡°ì–¸)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Final Agent                  â”‚
â”‚         (final_agent.py)             â”‚
â”‚                                      â”‚
â”‚  â€¢ Sub Agent ê²°ê³¼ ì¢…í•©                â”‚
â”‚  â€¢ ìµœì¢… ë‹µë³€ ìƒì„±                     â”‚
â”‚  â€¢ ì¸ìš© ì¶œì²˜ ì •ë¦¬                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
    ìµœì¢… ë‹µë³€
```

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `__init__.py` | ëª¨ë“ˆ export |
| `orchestration_agent.py` | ì§ˆë¬¸ ë¶„ì„ ë° ì‹¤í–‰ ê³„íš ìˆ˜ë¦½ |
| `sub_agents.py` | ëŒ€í•™ë³„/ê¸°ëŠ¥ë³„ ì „ë¬¸ ì—ì´ì „íŠ¸ ì‹¤í–‰ |
| `final_agent.py` | ê²°ê³¼ ì¢…í•© ë° ìµœì¢… ë‹µë³€ ìƒì„± |
| `agent_prompts.py` | ì—ì´ì „íŠ¸ë³„ í”„ë¡¬í”„íŠ¸ ì •ì˜ |
| `score_preprocessing.py` | ì„±ì  ë°ì´í„° ì „ì²˜ë¦¬ |
| `mock_database.py` | í…ŒìŠ¤íŠ¸ìš© Mock ë°ì´í„°ë² ì´ìŠ¤ |

---

### ğŸ”§ í•µì‹¬ ì„œë¹„ìŠ¤

| íŒŒì¼ëª… | ì—­í•  | ì—°ê²° ëŒ€ìƒ |
|--------|------|----------|
| `supabase_client.py` | Supabase í´ë¼ì´ì–¸íŠ¸ (DB ì—°ê²°, ì €ì¥, ì¡°íšŒ) | ëª¨ë“  ë¼ìš°í„° |
| `gemini_service.py` | Google Gemini AI í†µí•© (í…ìŠ¤íŠ¸ ìƒì„±) | multi_agent, chat |
| `gemini_pdf_service.py` | PDF â†’ Markdown ë³€í™˜ | upload.py |
| `embedding_service.py` | í…ìŠ¤íŠ¸ ì²­í‚¹ ë° ì„ë² ë”© ìƒì„± | upload.py |
| `classifier_service.py` | ë¬¸ì„œ ë¶„ë¥˜ (ìš”ì•½, ì¶œì²˜, í•´ì‹œíƒœê·¸) | upload.py |

---

### ğŸ“Š ì ìˆ˜ ê³„ì‚° ì„œë¹„ìŠ¤

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `snu_score_calculator.py` | ì„œìš¸ëŒ€ ì ìˆ˜ ê³„ì‚° |
| `yonsei_score_calculator.py` | ì—°ì„¸ëŒ€ ì ìˆ˜ ê³„ì‚° |
| `korea_score_calculator.py` | ê³ ë ¤ëŒ€ ì ìˆ˜ ê³„ì‚° |
| `sogang_score_calculator.py` | ì„œê°•ëŒ€ ì ìˆ˜ ê³„ì‚° |
| `khu_score_calculator.py` | ê²½í¬ëŒ€ ì ìˆ˜ ê³„ì‚° |
| `score_converter.py` | ë²”ìš© ì ìˆ˜ ë³€í™˜ê¸° |
| `data_standard.py` | ë°ì´í„° í‘œì¤€í™” |

---

### ğŸ“ models/ (ë°ì´í„° ëª¨ë¸)

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `rag_models.py` | RAG ê´€ë ¨ Pydantic ëª¨ë¸ (`ClassificationResult` ë“±) |

---

### ğŸ“ migrations/ (DB ë§ˆì´ê·¸ë ˆì´ì…˜)

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `01_initial_setup.sql` | ì´ˆê¸° ì„¤ì • (pgvector, policy_documents) |
| `02_create_metadata_table.sql` | documents_metadata í…Œì´ë¸” |
| `03_add_hashtags.sql` | í•´ì‹œíƒœê·¸ ì»¬ëŸ¼ |
| `04_add_storage_name.sql` | Storage íŒŒì¼ëª… ì»¬ëŸ¼ |
| `05_add_file_url.sql` | íŒŒì¼ URL ì»¬ëŸ¼ |
| `06_add_user_sessions.sql` | ì‚¬ìš©ì ì„¸ì…˜ í…Œì´ë¸” |
| `07_create_announcements.sql` | ê³µì§€ì‚¬í•­ í…Œì´ë¸” |

---

### ğŸ“ data/prompts/ (í”„ë¡¬í”„íŠ¸ ë°ì´í„°)

```
data/prompts/orchestration/system/
â”œâ”€â”€ active.json           # í˜„ì¬ í™œì„± í”„ë¡¬í”„íŠ¸
â””â”€â”€ 20260120_165907.json  # ë²„ì „ë³„ í”„ë¡¬í”„íŠ¸ ë°±ì—…
```

---

# ğŸ¨ Frontend (ì¤‘ìœ„ ë ˆë²¨)

## ğŸ“ ì§„ì…ì 

### `frontend/index.html`
**ì—­í• **: HTML ì§„ì…ì , React ì•± ë§ˆìš´íŠ¸

### `frontend/src/main.tsx` â­
**ì—­í• **: React ì•± ì´ˆê¸°í™”

### `frontend/src/App.tsx`
**ì—­í• **: ë¼ìš°íŒ… ì„¤ì •

**ë¼ìš°íŠ¸ êµ¬ì¡°**:
```
App.tsx
â”œâ”€â”€ /auth        â†’ AuthPage (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
â”œâ”€â”€ /            â†’ ChatPage (ë©”ì¸ ì±„íŒ…) [ì¸ì¦ í•„ìš”]
â”œâ”€â”€ /admin       â†’ AdminPage (ë¬¸ì„œ ê´€ë¦¬) [ê´€ë¦¬ì ì „ìš©]
â””â”€â”€ /agent       â†’ AgentAdminPage (ì—ì´ì „íŠ¸ ê´€ë¦¬) [ê´€ë¦¬ì ì „ìš©]
```

---

## ğŸ“ src/pages/ (í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸)

| íŒŒì¼ëª… | ì—­í•  | ì£¼ìš” ê¸°ëŠ¥ |
|--------|------|----------|
| `ChatPage.tsx` | **ë©”ì¸ ì±„íŒ… í˜ì´ì§€** | ì±„íŒ… UI, ì‚¬ì´ë“œë°”, SSE ìŠ¤íŠ¸ë¦¬ë° |
| `AdminPage.tsx` | ë¬¸ì„œ ê´€ë¦¬ í˜ì´ì§€ | PDF ì—…ë¡œë“œ, ë¬¸ì„œ CRUD |
| `AgentAdminPage.tsx` | ì—ì´ì „íŠ¸ ê´€ë¦¬ | ReactFlow ì‹œê°í™”, í”„ë¡¬í”„íŠ¸ í¸ì§‘ |
| `AuthPage.tsx` | ì¸ì¦ í˜ì´ì§€ | ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼ |

---

## ğŸ“ src/components/ (UI ì»´í¬ë„ŒíŠ¸)

| íŒŒì¼ëª… | ì—­í•  | ì‚¬ìš© ìœ„ì¹˜ |
|--------|------|----------|
| `ChatMessage.tsx` | ë©”ì‹œì§€ ë Œë”ë§ (ë§ˆí¬ë‹¤ìš´, ì¸ìš©, í…Œì´ë¸”) | ChatPage |
| `ThinkingProcess.tsx` | AI ì²˜ë¦¬ ì¤‘ ë¡œë”© í‘œì‹œ | ChatPage |
| `AgentPanel.tsx` | ì—ì´ì „íŠ¸ ë””ë²„ê·¸ íŒ¨ë„ (ê´€ë¦¬ììš©) | ChatPage |
| `AuthModal.tsx` | ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ | ChatPage |
| `ChatSidebar.tsx` | âš ï¸ **ë¯¸ì‚¬ìš©** | - |
| `ChatHistorySidebar.tsx` | âš ï¸ **ë¯¸ì‚¬ìš©** | - |

---

## ğŸ“ src/api/ (API í´ë¼ì´ì–¸íŠ¸)

### `client.ts`
**ì—­í• **: ë°±ì—”ë“œ API í†µì‹ 

**ì£¼ìš” í•¨ìˆ˜**:
| í•¨ìˆ˜ëª… | ì—­í•  |
|--------|------|
| `sendMessageStream()` | SSE ìŠ¤íŠ¸ë¦¬ë° ì±„íŒ… |
| `uploadDocument()` | PDF ì—…ë¡œë“œ |
| `getDocuments()` | ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ |
| `updateDocument()` | ë¬¸ì„œ ìˆ˜ì • |
| `deleteDocument()` | ë¬¸ì„œ ì‚­ì œ |
| `getAgents()` | ì—ì´ì „íŠ¸ ëª©ë¡ |
| `resetSession()` | ì„¸ì…˜ ì´ˆê¸°í™” |

---

## ğŸ“ src/contexts/ (ìƒíƒœ ê´€ë¦¬)

### `AuthContext.tsx`
**ì—­í• **: ì¸ì¦ ìƒíƒœ ì „ì—­ ê´€ë¦¬

**ì œê³µ ê¸°ëŠ¥**:
- `user` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´
- `signIn()` - ë¡œê·¸ì¸
- `signUp()` - íšŒì›ê°€ì…
- `signOut()` - ë¡œê·¸ì•„ì›ƒ
- í† í° ìë™ ê²€ì¦

---

## ğŸ“ src/hooks/ (ì»¤ìŠ¤í…€ í›…)

| íŒŒì¼ëª… | ì—­í•  | ì‚¬ìš© ì—¬ë¶€ |
|--------|------|----------|
| `useChat.ts` | ì±„íŒ… ì„¸ì…˜ ê´€ë¦¬ (Supabase ì§ì ‘ ì—°ê²°) | âœ… ì‚¬ìš© ì¤‘ |
| `useChatHistory.ts` | ì±„íŒ… íˆìŠ¤í† ë¦¬ ê´€ë¦¬ (REST API) | âš ï¸ **ë¯¸ì‚¬ìš©** |

---

## ğŸ“ src/lib/ (ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •)

### `supabase.ts`
**ì—­í• **: Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”

---

## ğŸ”§ ì„¤ì • íŒŒì¼

| íŒŒì¼ëª… | ì—­í•  |
|--------|------|
| `vite.config.ts` | Vite ë¹Œë“œ ì„¤ì •, API í”„ë¡ì‹œ (`/api` â†’ `localhost:8000`) |
| `tsconfig.json` | TypeScript ì„¤ì • |
| `tailwind.config.js` | TailwindCSS ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ |
| `postcss.config.js` | PostCSS í”ŒëŸ¬ê·¸ì¸ ì„¤ì • |
| `package.json` | Node.js ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸ |

---

# ğŸ—‘ï¸ ì“¸ëª¨ì—†ëŠ”/ì •ë¦¬ í•„ìš”í•œ íŒŒì¼ ëª©ë¡

## âŒ í™•ì‹¤íˆ ë¯¸ì‚¬ìš© (ì‚­ì œ ê°€ëŠ¥)

### í”„ë¡ íŠ¸ì—”ë“œ
| íŒŒì¼ | ì´ìœ  |
|------|------|
| `frontend/src/components/ChatSidebar.tsx` | ì–´ë””ì„œë„ import ì•ˆ ë¨ |
| `frontend/src/components/ChatHistorySidebar.tsx` | ì–´ë””ì„œë„ import ì•ˆ ë¨ |
| `frontend/src/hooks/useChatHistory.ts` | ChatPageì—ì„œ `useChat.ts` ì‚¬ìš© ì¤‘ |
| `frontend/test_citation_debug.html` | ë””ë²„ê¹…ìš© í…ŒìŠ¤íŠ¸ íŒŒì¼ |

### ë°±ì—”ë“œ (ë£¨íŠ¸)
| íŒŒì¼ | ì´ìœ  |
|------|------|
| `add_file_url_column.sql` | `migrations/05_add_file_url.sql`ë¡œ ëŒ€ì²´ë¨ |
| `add_hashtags_column.sql` | `migrations/03_add_hashtags.sql`ë¡œ ëŒ€ì²´ë¨ |
| `add_storage_file_name_column.sql` | `migrations/04_add_storage_name.sql`ë¡œ ëŒ€ì²´ë¨ |
| `backend/test_pdf_download.html` | í…ŒìŠ¤íŠ¸ìš© HTML |

### í”„ë¡œì íŠ¸ ë£¨íŠ¸
| íŒŒì¼ | ì´ìœ  |
|------|------|
| `token_logger.py` | ìœ í‹¸ë¦¬í‹°, ì •ë¦¬ í•„ìš” |
| `view_token_stats.py` | ìœ í‹¸ë¦¬í‹°, ì •ë¦¬ í•„ìš” |
| `test_deepseek.py` | í…ŒìŠ¤íŠ¸ íŒŒì¼ |
| `sub_agents_develop_2.py` | ê°œë°œìš© ì„ì‹œ íŒŒì¼ |
| `__pycache__/` | ìºì‹œ í´ë” (gitignore ë˜ì–´ìˆìŒ) |

---

## âš ï¸ ë ˆê±°ì‹œ ì½”ë“œ (ë¦¬íŒ©í† ë§ ê¶Œì¥)

### ë°±ì—”ë“œ ì„œë¹„ìŠ¤
| íŒŒì¼ | ì´ìœ  |
|------|------|
| `services/agent_service.py` | ë ˆê±°ì‹œ ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤, multi_agentë¡œ ëŒ€ì²´ë¨ |
| `services/admission_agent.py` | ë ˆê±°ì‹œ ì…ì‹œ ì—ì´ì „íŠ¸, multi_agentë¡œ ëŒ€ì²´ë¨ |
| `services/score_converter_example.py` | ì˜ˆì œ íŒŒì¼ |
| `services/data_standard` | ë¹ˆ íŒŒì¼/ë””ë ‰í† ë¦¬ |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ íŒŒì¼ (ì •ë¦¬ ê¶Œì¥)

### `backend/services/` ë‚´ í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤
| íŒŒì¼ | ì—­í•  |
|------|------|
| `test_all_universities.py` | ì „ì²´ ëŒ€í•™ í…ŒìŠ¤íŠ¸ |
| `test_consulting_agent.py` | ì»¨ì„¤íŒ… ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸ |
| `test_final_integration.py` | ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸ |
| `test_full_pipeline.py` | ì „ì²´ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ |
| `test_raw_score.py` | ì›ì‹œ ì ìˆ˜ í…ŒìŠ¤íŠ¸ |
| `test_score_preprocessing.py` | ì ìˆ˜ ì „ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ |
| `test_unified.py` | í†µí•© í…ŒìŠ¤íŠ¸ |
| `test_unified_server.py` | í†µí•© ì„œë²„ í…ŒìŠ¤íŠ¸ |
| `test_unified_web.html` | ì›¹ í†µí•© í…ŒìŠ¤íŠ¸ |

### í…ŒìŠ¤íŠ¸ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸
| íŒŒì¼ | ì—­í•  |
|------|------|
| `CLEANUP_OLD_TESTS.sh` | í…ŒìŠ¤íŠ¸ ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ |
| `quick_test.sh` | ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ |
| `run_unified_test.sh` | í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ |
| `run_unified_web.sh` | ì›¹ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ |

**ê¶Œì¥**: ì´ í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ì„ `backend/tests/` í´ë”ë¡œ ì´ë™

---

## ğŸ“š ë¬¸ì„œ íŒŒì¼ (ì •ë¦¬ ê¶Œì¥)

### `backend/services/docs/` 
- `README.md`
- `score_calculation_method.html`
- `score_calculation_method.md`
- `score_doc_url.txt`

### `docs/` (ë£¨íŠ¸)
ë‹¤ìˆ˜ì˜ í•œê¸€ ë¬¸ì„œë“¤ - ë¬¸ì„œ í´ë”ë¡œ í†µí•© ê¶Œì¥

---

# ğŸ”— ì£¼ìš” ë°ì´í„° íë¦„

## 1. ì±„íŒ… íë¦„

```
ì‚¬ìš©ì ë©”ì‹œì§€ ì…ë ¥ (ChatPage.tsx)
         â”‚
         â–¼
client.ts::sendMessageStream()
         â”‚ POST /api/chat/stream
         â–¼
routers/chat.py
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   orchestration_agent.py            â”‚
â”‚   â€¢ ì§ˆë¬¸ ë¶„ì„                        â”‚
â”‚   â€¢ í•„ìš” ì—ì´ì „íŠ¸ ê²°ì •                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   sub_agents.py                     â”‚
â”‚   â€¢ ëŒ€í•™ë³„ ì •ë³´ ê²€ìƒ‰ (RAG)           â”‚
â”‚   â€¢ supabase_clientì—ì„œ ë¬¸ì„œ ê²€ìƒ‰    â”‚
â”‚   â€¢ gemini_serviceë¡œ ë‹µë³€ ìƒì„±       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   final_agent.py                    â”‚
â”‚   â€¢ ê²°ê³¼ ì¢…í•©                        â”‚
â”‚   â€¢ ìµœì¢… ë‹µë³€ ìƒì„±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
SSE ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ì „ì†¡
         â”‚
         â–¼
ChatMessage.tsxì—ì„œ ë Œë”ë§
```

## 2. ë¬¸ì„œ ì—…ë¡œë“œ íë¦„

```
PDF íŒŒì¼ ì„ íƒ (AdminPage.tsx)
         â”‚
         â–¼
client.ts::uploadDocument()
         â”‚ POST /api/upload
         â–¼
routers/upload.py
         â”‚
         â”œâ”€â–º gemini_pdf_service.py (PDF â†’ Markdown)
         â”‚
         â”œâ”€â–º classifier_service.py (ìš”ì•½/í•´ì‹œíƒœê·¸ ì¶”ì¶œ)
         â”‚
         â”œâ”€â–º embedding_service.py (ì²­í‚¹ + ì„ë² ë”©)
         â”‚
         â””â”€â–º supabase_client.py (DB ì €ì¥)
                  â”‚
                  â–¼
         Supabase (documents_metadata + policy_documents)
```

---

# ğŸ”‘ í™˜ê²½ ë³€ìˆ˜ (í•„ìš”í•œ ì„¤ì •)

## Backend (`backend/.env`)
```env
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_anon_key
SUPABASE_JWT_SECRET=your_jwt_secret
GEMINI_API_KEY=your_gemini_api_key
BACKEND_PORT=8000
FRONTEND_URL=http://localhost:5173
```

## Frontend (`frontend/.env`)
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

---

# ğŸ“‹ ë¹ ë¥¸ ì°¸ì¡°

## ì„œë²„ ì‹¤í–‰
```bash
# ì „ì²´ í”„ë¡œì íŠ¸ ì„¤ì •
./setup.sh

# ì„œë²„ ì‹œì‘ (macOS)
./start.sh

# ì„œë²„ ì¤‘ì§€
./stop.sh
```

## ìˆ˜ë™ ì‹¤í–‰
```bash
# ë°±ì—”ë“œ
cd backend
source venv/bin/activate
uvicorn main:app --reload --port 8000

# í”„ë¡ íŠ¸ì—”ë“œ (ë‹¤ë¥¸ í„°ë¯¸ë„)
cd frontend
npm run dev
```

## ì ‘ì† URL
- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173
- ë°±ì—”ë“œ API: http://localhost:8000
- API ë¬¸ì„œ: http://localhost:8000/docs

---

*ì´ ë¬¸ì„œëŠ” 2026ë…„ 1ì›” 25ì¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
