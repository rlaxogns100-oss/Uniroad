agent 흐름: 사용자 질문 -> Router agent가 적절한 함수 호출 -> RAG 함수가 해당하는 자료 목록 서칭 -> main agent에 전달 -> 답변 생성


<Router agent>
model: gemini 2.5 flash lite
역할: 사용자 질문에 답하는데 필요한 정보를 찾기 위한 적절한 함수 실행. 기존의 orchestration_agent와 달리 자료 전달만 수행

input: 사용자 질문 + 기존 대화 로그
프롬프트: 정체성 + 함수 목록과 역할 + 쿼리 형식 + 함수 호출 알고리즘

output: 호출 함수명 및 변수
###예시1###
{
    function_name = univ()
    function_key = '서울대학교'
    query = '2025학년도 서울대학교 기계공학부 수시 입시요강'
}
###예시2###
{
    function_name = consult()
    function_key = '적정, 상향, 안정, 불가능', '기계공학부, 기계공학과, 로봇공학과, 메카트로닉스공학부'
    query = 전처리된 성적
}

<RAG 함수>
파이썬 기반의 RAG 함수, 따로 llm을 호출하지 않음.
유사도 기반으로 관련된 자료 섹션을 출처화 함께 main agent로 전달

<Main agent>
model: gemini 3 flash preview
역할: 사용자 질문과 주어진 자료를 토대로 대답 생성

input: 사용자 질문 + 기존 대화 내역 + function의 자료
프롬프트: 정체성 + 자료 선별 규칙 + 답변 형식

output: 답변


